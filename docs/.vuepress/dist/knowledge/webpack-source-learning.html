<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>webpack源码 | Jamescain Blog</title>
    <meta name="description" content="A knowledge blog">
    <link rel="icon" href="/My-lab/favicon.ico">
    
    <link rel="preload" href="/My-lab/assets/css/0.styles.ff99f6a1.css" as="style"><link rel="preload" href="/My-lab/assets/js/app.8b4fb9c1.js" as="script"><link rel="preload" href="/My-lab/assets/js/29.1f560433.js" as="script"><link rel="prefetch" href="/My-lab/assets/js/14.ca3d092a.js"><link rel="prefetch" href="/My-lab/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/My-lab/assets/js/3.e313a01f.js"><link rel="prefetch" href="/My-lab/assets/js/4.7372a5ca.js"><link rel="prefetch" href="/My-lab/assets/js/5.9bf77266.js"><link rel="prefetch" href="/My-lab/assets/js/6.b95fd7bb.js"><link rel="prefetch" href="/My-lab/assets/js/7.135aa519.js"><link rel="prefetch" href="/My-lab/assets/js/8.315a8f31.js"><link rel="prefetch" href="/My-lab/assets/js/9.2df7844a.js"><link rel="prefetch" href="/My-lab/assets/js/10.e39e989b.js"><link rel="prefetch" href="/My-lab/assets/js/11.6630158e.js"><link rel="prefetch" href="/My-lab/assets/js/12.a1e4d468.js"><link rel="prefetch" href="/My-lab/assets/js/13.0ec2c5fe.js"><link rel="prefetch" href="/My-lab/assets/js/15.0e6986e2.js"><link rel="prefetch" href="/My-lab/assets/js/16.34be30e9.js"><link rel="prefetch" href="/My-lab/assets/js/17.a15bebf3.js"><link rel="prefetch" href="/My-lab/assets/js/18.088a3a0c.js"><link rel="prefetch" href="/My-lab/assets/js/19.73ad76f8.js"><link rel="prefetch" href="/My-lab/assets/js/20.8b802e9e.js"><link rel="prefetch" href="/My-lab/assets/js/21.f56eab97.js"><link rel="prefetch" href="/My-lab/assets/js/22.552cbb91.js"><link rel="prefetch" href="/My-lab/assets/js/23.91308add.js"><link rel="prefetch" href="/My-lab/assets/js/24.7b0c00df.js"><link rel="prefetch" href="/My-lab/assets/js/25.df2d596b.js"><link rel="prefetch" href="/My-lab/assets/js/26.a2ef4836.js"><link rel="prefetch" href="/My-lab/assets/js/27.11580100.js"><link rel="prefetch" href="/My-lab/assets/js/28.4d3d36bb.js">
    <link rel="stylesheet" href="/My-lab/assets/css/0.styles.ff99f6a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/My-lab/" class="home-link router-link-active"><!----> <span class="site-name">Jamescain Blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/My-lab/knowledge/" class="nav-link router-link-active">知识库</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://twitter.com/Jamescain_lll" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/james-cain/My-lab" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/My-lab/knowledge/" class="nav-link router-link-active">知识库</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://twitter.com/Jamescain_lll" target="_blank" rel="noopener noreferrer" class="nav-link external">
  作者twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <a href="https://github.com/james-cain/My-lab" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading"><span>基础</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/My-lab/knowledge/Damn-hole-of-html5.html" class="sidebar-link">html5</a></li><li><a href="/My-lab/knowledge/Damn-hole-of-javascript.html" class="sidebar-link">JavaScript</a></li><li><a href="/My-lab/knowledge/review-the-javascript.html" class="sidebar-link">ES6</a></li><li><a href="/My-lab/knowledge/Damn-hole-of-http.html" class="sidebar-link">http/http2/https</a></li><li><a href="/My-lab/knowledge/Damn-hole-of-Interview.html" class="sidebar-link">Interview</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>进阶</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/My-lab/knowledge/Damn-hole-of-Browser.html" class="sidebar-link">Browser</a></li><li><a href="/My-lab/knowledge/Damn-hole-of-IE9.html" class="sidebar-link">IE9 兼容性</a></li><li><a href="/My-lab/knowledge/Damn-hole-of-mobile-compatibility.html" class="sidebar-link">mobile 兼容性</a></li><li><a href="/My-lab/knowledge/Damn-hole-of-network.html" class="sidebar-link">网络</a></li><li><a href="/My-lab/knowledge/Damn-hole-of-safe-and-hacker.html" class="sidebar-link">网络安全</a></li><li><a href="/My-lab/knowledge/Damn-hole-of-javascript-algonithms.html" class="sidebar-link">JavaScript算法</a></li><li><a href="/My-lab/knowledge/Damn-hole-of-performance.html" class="sidebar-link">性能优化</a></li><li><a href="/My-lab/knowledge/parameters-of-package.html" class="sidebar-link">详解package.json</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading open"><span>工具</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/My-lab/knowledge/Damn-hole-of-babel.html" class="sidebar-link">babel7</a></li><li><a href="/My-lab/knowledge/webpack-perf.html" class="sidebar-link">Webpack打包优化</a></li><li><a href="/My-lab/knowledge/webpack-source-learning.html" class="active sidebar-link">webpack源码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/My-lab/knowledge/webpack-source-learning.html#webpack-源码调试" class="sidebar-link">Webpack 源码调试</a></li><li class="sidebar-sub-header"><a href="/My-lab/knowledge/webpack-source-learning.html#webpack-4源码中的代码段理解图" class="sidebar-link">Webpack 4源码中的代码段理解图</a></li></ul></li><li><a href="/My-lab/knowledge/how-to-use-npm-sonatype.html" class="sidebar-link">用sonatype3搭建npm私服</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>使用心得</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/My-lab/knowledge/Damn-hole-of-electron.html" class="sidebar-link">electron</a></li><li><a href="/My-lab/knowledge/Damn-hole-of-pwa.html" class="sidebar-link">PWA</a></li><li><a href="/My-lab/knowledge/how-to-learn-ionic.html" class="sidebar-link">ionic</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>源码分析</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/My-lab/knowledge/Damn-hole-of-mvvm.html" class="sidebar-link">MVVM</a></li><li><a href="/My-lab/knowledge/Damn-hole-of-React.html" class="sidebar-link">React</a></li><li><a href="/My-lab/knowledge/Damn-hole-of-Vue.html" class="sidebar-link">Vue</a></li></ul></div></li><li><div class="sidebar-group"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/My-lab/knowledge/server-record.html" class="sidebar-link">部署一台属于自己的服务器</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="webpack源码"><a href="#webpack源码" aria-hidden="true" class="header-anchor">#</a> webpack源码</h1> <ol><li>从核心入手，Tapable - (get)</li> <li>接下来详细阅读compiler，compilation两个继承类 - (get)</li> <li>学习如何编写plugin - (get)</li> <li>学习如何编写loader</li> <li>学习HMR原理</li> <li>理解bundle，如何生成chunks，需要理解AST、acorn  - (get)</li> <li>理解plugin执行原理  - (get)</li> <li>理解loader执行原理 - (get)</li> <li>loader-runner运行机制</li> <li>理解resolver是如何实现的，即如何查找对应文件所在的全路径</li> <li>对感兴趣的插件，loader学习源码</li> <li>动手写几个插件，loader</li> <li>webpack更新速度惊人，跟着作者的步伐，尽量也能在源码中找到你的代码段</li></ol> <h2 id="webpack-源码调试"><a href="#webpack-源码调试" aria-hidden="true" class="header-anchor">#</a> Webpack 源码调试</h2> <p>全局安装node-nightly</p> <div class="language- extra-class"><pre class="language-text"><code>npm install --global node-nightly
</code></pre></div><p>安装完成后，执行</p> <div class="language- extra-class"><pre class="language-text"><code>node-nightly
</code></pre></div><p>此时会下载nightly cli包，安装完成后才可以使用</p> <p>接下来运行以下命令，Chrome Devtools会在chrome://inspect内产生可以断点调试的inspect链接</p> <div class="language- extra-class"><pre class="language-text"><code>node-nightly --inspect-brk ./node_modules/webpack/bin/webpack.js
</code></pre></div><p>--inspect-brk 标记会自动给脚本第一句打断点，可以在源代码中设置断点调试</p> <h2 id="webpack-4源码中的代码段理解图"><a href="#webpack-4源码中的代码段理解图" aria-hidden="true" class="header-anchor">#</a> Webpack 4源码中的代码段理解图</h2> <h3 id="compiler、compilation、hook"><a href="#compiler、compilation、hook" aria-hidden="true" class="header-anchor">#</a> compiler、compilation、hook</h3> <p><img src="https://coracain.top/assets/webpackprocess1.png" alt="webpack执行过程1"></p> <p>webpack.js 在最开始会new Compiler实例，创建compiler实例的hook，理解后面参数的含义，参数为hook执行call/callAsync/promise时，绑定的钩子的执行函数的参数，一一对应。也就是这里定义了几个变量，tap绑定的函数就可以传入几个参数</p> <p><img src="https://coracain.top/assets/webpackprocess2.png" alt="webpack执行过程2"></p> <p>this.hooks.compilation.call(compilation, params)中的两个参数即为传入钩子函数的参数值</p> <p><img src="https://coracain.top/assets/webpackprocess3.png" alt="webpack执行过程3"></p> <p>该代码段为Tapable的Hook.js，实际无论是compiler，compilation，resolver都是继承于Tapable，也就是都会执行这些方法，this.hooks.compilation.call即调用的就是<code>this.call = this._call = this.createCompileDelegate(&quot;call&quot;, &quot;sync&quot;)</code></p> <p><img src="https://coracain.top/assets/webpackprocess4.png" alt="webpack执行过程4"></p> <p>Hook总共有10种类型，分为异步和同步两大类；异步包括并发执行和串行执行</p> <p><img src="https://coracain.top/assets/webpackprocess5.png" alt="webpack执行过程5"></p> <p>create的返回值为函数方法，this.call(params)的执行方法</p> <h3 id="module-rules加载"><a href="#module-rules加载" aria-hidden="true" class="header-anchor">#</a> module.rules加载</h3> <div class="language- extra-class"><pre class="language-text"><code>// webpack.js compiler创建后都做了以下的事情 
// 创建compiler实例
compiler = new Compiler()
// 创建WebpackOptionsApply实例，挂在默认plugin hook
compiler.options = new WebpackOptionsApply().process(options, compiler)
	// WebpackOptionsApply.js 挂在各种plugin
    new EntryOptionPlugin().apply(compiler)
    	// EntryOptionPlugin.js 判断entry参数类型 挂不同类型plugin
        const SingleEntryPlugin = require()
        const MultiEntryPlugin = require()
        const DynamicEntryPlugin = require()
        	// 以SingleEntryPlugin.js为例
            compiler.hooks.make.tapAsync(
            	&quot;SingleEntryPlugin&quot;, (compilation, callback) =&gt; {
                	…
                    compilation.addEntry(context, dep, name, callback)
                }
			)
</code></pre></div><h4 id="hook执行顺序"><a href="#hook执行顺序" aria-hidden="true" class="header-anchor">#</a> hook执行顺序</h4> <p><img src="https://coracain.top/assets/hooks-chain-tip.png" alt="hooks"></p> <blockquote><p>environment-&gt;afterEnvironment-&gt;beforeRun-&gt;run-&gt;beforeCompile-&gt;compile-&gt;make-&gt;...-&gt;buildModule（<code>compilation</code>）-&gt;failModule or successModule(<code>compilation</code>)-&gt;finishModules（<code>compilation</code>）-&gt;seal（<code>compilation</code>）-&gt;afterCompile</p> <p>hook执行顺序，make开始执行compilation 入口addEntry接口</p></blockquote> <h4 id="compilation-js方法执行顺序"><a href="#compilation-js方法执行顺序" aria-hidden="true" class="header-anchor">#</a> compilation.js方法执行顺序</h4> <p><img src="https://coracain.top/assets/compilation-run-tip.png" alt="compilation.js"></p> <blockquote><p>addEntry-&gt;_addModuleChain-&gt;addModule[判断moduleResult.build === true]-&gt;buildModule-&gt;（<code>NormalModule.js</code>）build-&gt;（<code>NormalModule.js</code>）doBuild-&gt;（<code>loader-runner.js</code>）runLoaders（该方法会把上一个loader的结果或资源文件传入进去，并且该函数内还有一些方法，可以是loader改变为异步调用方式，或者获取query参数）-&gt;iteratePitchingLoaders(loader-runner.js)-&gt;processModuleDependencies-&gt;addModuleDependencies-&gt;addModule[判断moduleResult.build === true]-&gt;回到执行buildModule</p> <p>_addModuleChain和addModuleDependencies方法中 都调用了addModule函数生成新的moduleResult，若moduleResult.build === true,则会执行buildModule</p></blockquote> <h4 id="addmodule-module-cachegroup"><a href="#addmodule-module-cachegroup" aria-hidden="true" class="header-anchor">#</a> addModule(module, cacheGroup)</h4> <p><em>每次module的变化是怎么发生的？</em></p> <blockquote><p>entry进入，通过create创建module，先去查找ruleSet规则是否有匹配，有则拼接链接，没有则不变；传入到runLoaders中获取处理后的_source、_ast，parser.parse处理_source、_ast返回还存在依赖的dependencies数组，将dependencies数组传入addModuleDependencies遍历，创建新的module。直到没有依赖的module，停止遍历，生成最终的bundle对象</p></blockquote> <p><em>执行style-loader，css-loader 为什么要遍历5遍？</em></p> <p>第一次module.request /Users/admin/repo/resourcecode/learning-webpack/src</p> <p>第二次module.request /Users/admin/repo/resourcecode/learning-webpack/node_modules/style-loader/index.js!/Users/admin/repo/resourcecode/learning-webpack/node_modules/css-loader/index.js!/Users/admin/repo/resourcecode/learning-webpack/src/index.css</p> <p>第三次module.request /Users/admin/repo/resourcecode/learning-webpack/node_modules/css-loader/index.js!/Users/admin/repo/resourcecode/learning-webpack/src/index.css</p> <p>第四次module.request /Users/admin/repo/resourcecode/learning-webpack/node_modules/css-loader/lib/css-base.js</p> <p>第五次module.request /Users/admin/repo/resourcecode/learning-webpack/node_modules/style-loader/lib/urls.js</p> <p>图解(只包含前两次)</p> <p><img src="https://coracain.top/assets/webpack-run1.png" alt="webpack-run1"></p> <p>执行第一次create，此时dependencies[0].request = './src/index.js'</p> <p><img src="https://coracain.top/assets/webpack-run2.png" alt="webpack-run2"></p> <p>ruleSet.exec() 解析路径是否有loader拦截</p> <p><img src="https://coracain.top/assets/webpack-run3.png" alt="webpack-run3"></p> <p>第一次解析只有返回默认的result</p> <p><img src="https://coracain.top/assets/webpack-run4.png" alt="webpack-run4"></p> <p><img src="https://coracain.top/assets/webpack-run5.png" alt="webpack-run5"></p> <p><img src="https://coracain.top/assets/webpack-run6.png" alt="webpack-run6"></p> <p>runLoaders解析index.js内容</p> <p><img src="https://coracain.top/assets/webpack-run7.png" alt="webpack-run7"></p> <p>parser.parse 生成ast树，解析树，将依赖对象存储在dependencies中</p> <p><img src="https://coracain.top/assets/webpack-run8.png" alt="webpack-run8"></p> <p>processModuleDependencies将dependencies中的依赖模块传入addModuleDependencies中，执行下一次的create</p> <p><img src="https://coracain.top/assets/webpack-run9.png" alt="webpack-run9"></p> <p>第二次create，传入的dependencies已经变为index.css</p> <p><img src="https://coracain.top/assets/webpack-run10.png" alt="webpack-run10"></p> <p>index.css被loader拦截，存在style-loader，css-loader两个拦截loader</p> <p><img src="https://coracain.top/assets/webpack-run11.png" alt="webpack-run11"></p> <p>此时request已经改为/Users/admin/repo/resourcecode/learning-webpack/node_modules/style-loader/index.js!/Users/admin/repo/resourcecode/learning-webpack/node_modules/css-loader/index.js!/Users/admin/repo/resourcecode/learning-webpack/src/index.css</p> <p><img src="https://coracain.top/assets/webpack-run12.png" alt="webpack-run12"></p> <p>runLoaders执行返回style-loader的代码段，赋给_source</p> <p><img src="https://coracain.top/assets/webpack-run13.png" alt="webpack-run13"></p> <p>经过parser.parse解析后，又多了好几个依赖</p> <p><img src="https://coracain.top/assets/webpack-run14.png" alt="webpack-run14"></p> <p>将依赖传给addModuleDependencies，进行接下来的create</p> <blockquote><p>经过图解，可以明白，第一次执行index.js，当解析源码遇到import 'index.css'，loader拦截，有两个style-loader和css-loader两个拦截加载器，接下来就是这两个拦截器的处理，但都是返回js代码，并解析；直到没有依赖结束，生成最终bundle。</p></blockquote> <h4 id="build-dobuild-runloaders执行函数"><a href="#build-dobuild-runloaders执行函数" aria-hidden="true" class="header-anchor">#</a> build-&gt;doBuild-&gt;runLoaders执行函数</h4> <div class="language- extra-class"><pre class="language-text"><code>build(options, compilation, resolver, fs, callback_build)
初始化_source _ast _buildHash为null
	doBuild(options, compilation, resolver, fs, callback_doBuild)
	执行runLoaders 返回	result{resourceBuffer,result.result[0] =&gt; source,sourceMap,extraInfo}
			执行createSource(source, resourceBuffer, sourceMap) 返回this._source
			赋值this._ast = extraInfo.webpackAST or null
			执行callback_doBuild
				this.parser.parse(this._ast || this._source.source(), …)
				执行callback_build
</code></pre></div><h4 id="理解-loader-runner"><a href="#理解-loader-runner" aria-hidden="true" class="header-anchor">#</a> 理解 loader-runner</h4> <blockquote><p>传入resource，context，loaders，readResource，实现同步/异步loader解析</p> <p>在loader中设置raw(true/false[default])，可以实现资源以Buffer or String形式传递</p> <p>在loader中设置pitch，并在pitch中return返回值，可以跳过接下来会调用的loader，pitch调用方式从左到右，loader实际执行方式从右到左</p></blockquote> <p>同步loader</p> <p>异步loader</p> <p>Raw loader处理结果方式String or Buffer</p> <p>pitch</p> <div class="language- extra-class"><pre class="language-text"><code>loader总是从右到左被调用，如果前一个loader的结果不关注，想忽略该结果。可以使用pitch方法，该方法从左往右调用
要在你的loader中实现pitch接口，如style-loader

module.exports.pitch = function (request) {
	if (this.cacheable) this.cacheable();

	var options = loaderUtils.getOptions(this) || {};

	validateOptions(require('./options.json'), options, 'Style Loader')
	...
}

若在pitch中return结果，将提前终止loader的遍历
例如
use: [
  'a-loader',
  'b-loader',
  'c-loader'
]

正常情况
|- a-loader `pitch`
  |- b-loader `pitch`
    |- c-loader `pitch`
      |- requested module is picked up as a dependency
    |- c-loader normal execution
  |- b-loader normal execution
|- a-loader normal execution

若a-loader在pitch中return
|- a-loader `pitch`
  |- b-loader `pitch` returns a module
|- a-loader normal execution
</code></pre></div><p>!!、！含义</p> <div class="language- extra-class"><pre class="language-text"><code>所有普通 loader 可以通过在请求中加上 ! 前缀来忽略（覆盖）。
所有普通和前置 loader 可以通过在请求中加上 -! 前缀来忽略（覆盖）。
所有普通，后置和前置 loader 可以通过在请求中加上 !! 前缀来忽略（覆盖）。
不应该使用行内 loader 和 ! 前缀，因为它们是非标准的。它们可在由 loader 生成的代码中使用。
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/My-lab/knowledge/webpack-perf.html" class="prev">
          Webpack打包优化
        </a></span> <span class="next"><a href="/My-lab/knowledge/how-to-use-npm-sonatype.html">
          用sonatype3搭建npm私服
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/My-lab/assets/js/29.1f560433.js" defer></script><script src="/My-lab/assets/js/app.8b4fb9c1.js" defer></script>
  </body>
</html>
